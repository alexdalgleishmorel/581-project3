{"ast":null,"code":"import _asyncToGenerator from \"/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport * as faceapi from 'face-api.js';\nimport * as i0 from \"@angular/core\";\nexport class MirrorComponent {\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.loadModels();\n      _this.startVideo();\n    })();\n  }\n  loadModels() {\n    return _asyncToGenerator(function* () {\n      // Load face detection models\n      const modelPath = '/assets/models';\n      yield faceapi.nets.tinyFaceDetector.loadFromUri(modelPath);\n      yield faceapi.nets.faceLandmark68Net.loadFromUri(modelPath);\n      yield faceapi.nets.faceRecognitionNet.loadFromUri(modelPath);\n    })();\n  }\n  startVideo() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Request access to the webcam\n        const stream = yield navigator.mediaDevices.getUserMedia({\n          video: true\n        });\n        _this2.video.nativeElement.srcObject = stream;\n        _this2.video.nativeElement.addEventListener('play', () => {\n          _this2.detectFaces();\n        });\n      } catch (error) {\n        console.error('Error accessing webcam:', error);\n      }\n    })();\n  }\n  detectFaces() {\n    var _this3 = this;\n    const canvas = this.overlay.nativeElement;\n    const displaySize = {\n      width: this.video.nativeElement.width,\n      height: this.video.nativeElement.height\n    };\n    faceapi.matchDimensions(canvas, displaySize);\n    setInterval( /*#__PURE__*/_asyncToGenerator(function* () {\n      const detections = yield faceapi.detectAllFaces(_this3.video.nativeElement, new faceapi.TinyFaceDetectorOptions()).withFaceLandmarks();\n      // Resize detections to match video display size\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\n      // Clear the overlay and draw new detections\n      canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n      faceapi.draw.drawDetections(canvas, resizedDetections);\n      faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n    }), 100);\n  }\n  static {\n    this.ɵfac = function MirrorComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || MirrorComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MirrorComponent,\n      selectors: [[\"mirror\"]],\n      decls: 9,\n      vars: 0,\n      consts: [[\"video\", \"\"], [\"overlay\", \"\"], [1, \"content-title\"], [1, \"outer-content\"], [1, \"mirror-border\"], [1, \"inner-content\"], [\"autoplay\", \"\", \"muted\", \"\"]],\n      template: function MirrorComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 2);\n          i0.ɵɵtext(1, \"Mirror View\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"div\", 3)(3, \"div\", 4)(4, \"div\", 5);\n          i0.ɵɵelement(5, \"video\", 6, 0)(7, \"canvas\", null, 1);\n          i0.ɵɵelementEnd()()();\n        }\n      },\n      styles: [\".mirror-border[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  padding: 25px;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n  border-radius: 10px;\\n  background-image: url(\\\"/assets/wood-texture.jpg\\\");\\n  background-size: cover;\\n  background-position: center;\\n}\\n\\n.outer-content[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 90%;\\n  background-color: whitesmoke;\\n  border-radius: 10px;\\n  padding: 10px;\\n}\\n\\n.inner-content[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  background-color: whitesmoke;\\n  border-radius: 10px;\\n  padding: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9taXJyb3IvbWlycm9yLmNvbXBvbmVudC5zY3NzIiwid2VicGFjazovLy4vLi4vLi4vLi4vRkFMTCUyMDI0LzU4MS81ODEtcHJvamVjdDMvc3JjL2FwcC9jb21wb25lbnRzL21pcnJvci9taXJyb3IuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFFQSxhQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtFQUVBLG1CQUFBO0VBQ0EsaURBQUE7RUFDQSxzQkFBQTtFQUNBLDJCQUFBO0FDREo7O0FESUE7RUFDSSxXQUFBO0VBQ0EsV0FBQTtFQUVBLDRCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0FDRko7O0FES0E7RUFDSSxXQUFBO0VBQ0EsWUFBQTtFQUVBLDRCQUFBO0VBQ0EsbUJBQUE7RUFDQSxhQUFBO0FDSEoiLCJzb3VyY2VzQ29udGVudCI6WyIubWlycm9yLWJvcmRlciB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAxMDAlO1xuICAgIHBhZGRpbmc6IDI1cHg7XG4gICAgXG4gICAgZGlzcGxheTogZmxleDtcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIFxuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKCcvYXNzZXRzL3dvb2QtdGV4dHVyZS5qcGcnKTtcbiAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcbn1cblxuLm91dGVyLWNvbnRlbnQge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogOTAlO1xuXG4gICAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGVzbW9rZTtcbiAgICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICAgIHBhZGRpbmc6IDEwcHg7XG59XG5cbi5pbm5lci1jb250ZW50IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgICBoZWlnaHQ6IDEwMCU7XG5cbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZXNtb2tlO1xuICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgcGFkZGluZzogMTBweDtcbn1cbiIsIi5taXJyb3ItYm9yZGVyIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcbiAgcGFkZGluZzogMjVweDtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi9hc3NldHMvd29vZC10ZXh0dXJlLmpwZ1wiKTtcbiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xufVxuXG4ub3V0ZXItY29udGVudCB7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDkwJTtcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGVzbW9rZTtcbiAgYm9yZGVyLXJhZGl1czogMTBweDtcbiAgcGFkZGluZzogMTBweDtcbn1cblxuLmlubmVyLWNvbnRlbnQge1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZXNtb2tlO1xuICBib3JkZXItcmFkaXVzOiAxMHB4O1xuICBwYWRkaW5nOiAxMHB4O1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}\n__decorate([ViewChild('video', {\n  static: true\n})], MirrorComponent.prototype, \"video\", void 0);\n__decorate([ViewChild('overlay', {\n  static: true\n})], MirrorComponent.prototype, \"overlay\", void 0);","map":{"version":3,"names":["faceapi","MirrorComponent","ngOnInit","_this","_asyncToGenerator","loadModels","startVideo","modelPath","nets","tinyFaceDetector","loadFromUri","faceLandmark68Net","faceRecognitionNet","_this2","stream","navigator","mediaDevices","getUserMedia","video","nativeElement","srcObject","addEventListener","detectFaces","error","console","_this3","canvas","overlay","displaySize","width","height","matchDimensions","setInterval","detections","detectAllFaces","TinyFaceDetectorOptions","withFaceLandmarks","resizedDetections","resizeResults","getContext","clearRect","draw","drawDetections","drawFaceLandmarks","selectors","decls","vars","consts","template","MirrorComponent_Template","rf","ctx","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","__decorate","ViewChild","static"],"sources":["/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/src/app/components/mirror/mirror.component.ts","/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/src/app/components/mirror/mirror.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport * as faceapi from 'face-api.js';\n\n@Component({\n  selector: 'mirror',\n  templateUrl: './mirror.component.html',\n  styleUrls: ['./mirror.component.scss'],\n})\nexport class MirrorComponent implements OnInit {\n  @ViewChild('video', { static: true }) video: ElementRef;\n  @ViewChild('overlay', { static: true }) overlay: ElementRef;\n\n  async ngOnInit() {\n    await this.loadModels();\n    this.startVideo();\n  }\n\n  async loadModels() {\n    // Load face detection models\n    const modelPath = '/assets/models';\n    await faceapi.nets.tinyFaceDetector.loadFromUri(modelPath);\n    await faceapi.nets.faceLandmark68Net.loadFromUri(modelPath);\n    await faceapi.nets.faceRecognitionNet.loadFromUri(modelPath);\n  }\n\n  async startVideo() {\n    try {\n      // Request access to the webcam\n      const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n      this.video.nativeElement.srcObject = stream;\n\n      this.video.nativeElement.addEventListener('play', () => {\n        this.detectFaces();\n      });\n    } catch (error) {\n      console.error('Error accessing webcam:', error);\n    }\n  }\n\n  detectFaces() {\n    const canvas = this.overlay.nativeElement;\n    const displaySize = { width: this.video.nativeElement.width, height: this.video.nativeElement.height };\n    faceapi.matchDimensions(canvas, displaySize);\n\n    setInterval(async () => {\n      const detections = await faceapi\n        .detectAllFaces(this.video.nativeElement, new faceapi.TinyFaceDetectorOptions())\n        .withFaceLandmarks();\n\n      // Resize detections to match video display size\n      const resizedDetections = faceapi.resizeResults(detections, displaySize);\n\n      // Clear the overlay and draw new detections\n      canvas.getContext('2d').clearRect(0, 0, canvas.width, canvas.height);\n      faceapi.draw.drawDetections(canvas, resizedDetections);\n      faceapi.draw.drawFaceLandmarks(canvas, resizedDetections);\n    }, 100);\n  }\n}\n","<div class=\"content-title\">Mirror View</div>\n<div class=\"outer-content\">\n  <div class=\"mirror-border\">\n    <div class=\"inner-content\">\n      <video #video autoplay muted></video>\n      <canvas #overlay></canvas>\n    </div>\n  </div>\n</div>\n"],"mappings":";;AACA,OAAO,KAAKA,OAAO,MAAM,aAAa;;AAOtC,OAAM,MAAOC,eAAe;EAIpBC,QAAQA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACZ,MAAMD,KAAI,CAACE,UAAU,EAAE;MACvBF,KAAI,CAACG,UAAU,EAAE;IAAC;EACpB;EAEMD,UAAUA,CAAA;IAAA,OAAAD,iBAAA;MACd;MACA,MAAMG,SAAS,GAAG,gBAAgB;MAClC,MAAMP,OAAO,CAACQ,IAAI,CAACC,gBAAgB,CAACC,WAAW,CAACH,SAAS,CAAC;MAC1D,MAAMP,OAAO,CAACQ,IAAI,CAACG,iBAAiB,CAACD,WAAW,CAACH,SAAS,CAAC;MAC3D,MAAMP,OAAO,CAACQ,IAAI,CAACI,kBAAkB,CAACF,WAAW,CAACH,SAAS,CAAC;IAAC;EAC/D;EAEMD,UAAUA,CAAA;IAAA,IAAAO,MAAA;IAAA,OAAAT,iBAAA;MACd,IAAI;QACF;QACA,MAAMU,MAAM,SAASC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;UAAEC,KAAK,EAAE;QAAI,CAAE,CAAC;QACzEL,MAAI,CAACK,KAAK,CAACC,aAAa,CAACC,SAAS,GAAGN,MAAM;QAE3CD,MAAI,CAACK,KAAK,CAACC,aAAa,CAACE,gBAAgB,CAAC,MAAM,EAAE,MAAK;UACrDR,MAAI,CAACS,WAAW,EAAE;QACpB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MACjD;IAAC;EACH;EAEAD,WAAWA,CAAA;IAAA,IAAAG,MAAA;IACT,MAAMC,MAAM,GAAG,IAAI,CAACC,OAAO,CAACR,aAAa;IACzC,MAAMS,WAAW,GAAG;MAAEC,KAAK,EAAE,IAAI,CAACX,KAAK,CAACC,aAAa,CAACU,KAAK;MAAEC,MAAM,EAAE,IAAI,CAACZ,KAAK,CAACC,aAAa,CAACW;IAAM,CAAE;IACtG9B,OAAO,CAAC+B,eAAe,CAACL,MAAM,EAAEE,WAAW,CAAC;IAE5CI,WAAW,eAAA5B,iBAAA,CAAC,aAAW;MACrB,MAAM6B,UAAU,SAASjC,OAAO,CAC7BkC,cAAc,CAACT,MAAI,CAACP,KAAK,CAACC,aAAa,EAAE,IAAInB,OAAO,CAACmC,uBAAuB,EAAE,CAAC,CAC/EC,iBAAiB,EAAE;MAEtB;MACA,MAAMC,iBAAiB,GAAGrC,OAAO,CAACsC,aAAa,CAACL,UAAU,EAAEL,WAAW,CAAC;MAExE;MACAF,MAAM,CAACa,UAAU,CAAC,IAAI,CAAC,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAEd,MAAM,CAACG,KAAK,EAAEH,MAAM,CAACI,MAAM,CAAC;MACpE9B,OAAO,CAACyC,IAAI,CAACC,cAAc,CAAChB,MAAM,EAAEW,iBAAiB,CAAC;MACtDrC,OAAO,CAACyC,IAAI,CAACE,iBAAiB,CAACjB,MAAM,EAAEW,iBAAiB,CAAC;IAC3D,CAAC,GAAE,GAAG,CAAC;EACT;;;uCAjDWpC,eAAe;IAAA;EAAA;;;YAAfA,eAAe;MAAA2C,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCR5BE,EAAA,CAAAC,cAAA,aAA2B;UAAAD,EAAA,CAAAE,MAAA,kBAAW;UAAAF,EAAA,CAAAG,YAAA,EAAM;UAGxCH,EAFJ,CAAAC,cAAA,aAA2B,aACE,aACE;UAEzBD,EADA,CAAAI,SAAA,kBAAqC,sBACX;UAGhCJ,EAFI,CAAAG,YAAA,EAAM,EACF,EACF;;;;;;;ADCkCE,UAAA,EAArCC,SAAS,CAAC,OAAO,EAAE;EAAEC,MAAM,EAAE;AAAI,CAAE,CAAC,C,6CAAmB;AAChBF,UAAA,EAAvCC,SAAS,CAAC,SAAS,EAAE;EAAEC,MAAM,EAAE;AAAI,CAAE,CAAC,C,+CAAqB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}