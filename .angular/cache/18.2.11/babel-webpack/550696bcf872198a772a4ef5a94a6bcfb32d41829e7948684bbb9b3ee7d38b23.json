{"ast":null,"code":"import { __awaiter, __generator } from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { getModelUris } from './common/getModelUris';\nimport { loadWeightMap } from './dom';\nimport { env } from './env';\nvar NeuralNetwork = /** @class */function () {\n  function NeuralNetwork(_name) {\n    this._name = _name;\n    this._params = undefined;\n    this._paramMappings = [];\n  }\n  Object.defineProperty(NeuralNetwork.prototype, \"params\", {\n    get: function () {\n      return this._params;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NeuralNetwork.prototype, \"paramMappings\", {\n    get: function () {\n      return this._paramMappings;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(NeuralNetwork.prototype, \"isLoaded\", {\n    get: function () {\n      return !!this.params;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  NeuralNetwork.prototype.getParamFromPath = function (paramPath) {\n    var _a = this.traversePropertyPath(paramPath),\n      obj = _a.obj,\n      objProp = _a.objProp;\n    return obj[objProp];\n  };\n  NeuralNetwork.prototype.reassignParamFromPath = function (paramPath, tensor) {\n    var _a = this.traversePropertyPath(paramPath),\n      obj = _a.obj,\n      objProp = _a.objProp;\n    obj[objProp].dispose();\n    obj[objProp] = tensor;\n  };\n  NeuralNetwork.prototype.getParamList = function () {\n    var _this = this;\n    return this._paramMappings.map(function (_a) {\n      var paramPath = _a.paramPath;\n      return {\n        path: paramPath,\n        tensor: _this.getParamFromPath(paramPath)\n      };\n    });\n  };\n  NeuralNetwork.prototype.getTrainableParams = function () {\n    return this.getParamList().filter(function (param) {\n      return param.tensor instanceof tf.Variable;\n    });\n  };\n  NeuralNetwork.prototype.getFrozenParams = function () {\n    return this.getParamList().filter(function (param) {\n      return !(param.tensor instanceof tf.Variable);\n    });\n  };\n  NeuralNetwork.prototype.variable = function () {\n    var _this = this;\n    this.getFrozenParams().forEach(function (_a) {\n      var path = _a.path,\n        tensor = _a.tensor;\n      _this.reassignParamFromPath(path, tensor.variable());\n    });\n  };\n  NeuralNetwork.prototype.freeze = function () {\n    var _this = this;\n    this.getTrainableParams().forEach(function (_a) {\n      var path = _a.path,\n        variable = _a.tensor;\n      var tensor = tf.tensor(variable.dataSync());\n      variable.dispose();\n      _this.reassignParamFromPath(path, tensor);\n    });\n  };\n  NeuralNetwork.prototype.dispose = function (throwOnRedispose) {\n    if (throwOnRedispose === void 0) {\n      throwOnRedispose = true;\n    }\n    this.getParamList().forEach(function (param) {\n      if (throwOnRedispose && param.tensor.isDisposed) {\n        throw new Error(\"param tensor has already been disposed for path \" + param.path);\n      }\n      param.tensor.dispose();\n    });\n    this._params = undefined;\n  };\n  NeuralNetwork.prototype.serializeParams = function () {\n    return new Float32Array(this.getParamList().map(function (_a) {\n      var tensor = _a.tensor;\n      return Array.from(tensor.dataSync());\n    }).reduce(function (flat, arr) {\n      return flat.concat(arr);\n    }));\n  };\n  NeuralNetwork.prototype.load = function (weightsOrUrl) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (weightsOrUrl instanceof Float32Array) {\n              this.extractWeights(weightsOrUrl);\n              return [2 /*return*/];\n            }\n            return [4 /*yield*/, this.loadFromUri(weightsOrUrl)];\n          case 1:\n            _a.sent();\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  NeuralNetwork.prototype.loadFromUri = function (uri) {\n    return __awaiter(this, void 0, void 0, function () {\n      var weightMap;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (uri && typeof uri !== 'string') {\n              throw new Error(this._name + \".loadFromUri - expected model uri\");\n            }\n            return [4 /*yield*/, loadWeightMap(uri, this.getDefaultModelName())];\n          case 1:\n            weightMap = _a.sent();\n            this.loadFromWeightMap(weightMap);\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  NeuralNetwork.prototype.loadFromDisk = function (filePath) {\n    return __awaiter(this, void 0, void 0, function () {\n      var readFile, _a, manifestUri, modelBaseUri, fetchWeightsFromDisk, loadWeights, manifest, _b, _c, weightMap;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            if (filePath && typeof filePath !== 'string') {\n              throw new Error(this._name + \".loadFromDisk - expected model file path\");\n            }\n            readFile = env.getEnv().readFile;\n            _a = getModelUris(filePath, this.getDefaultModelName()), manifestUri = _a.manifestUri, modelBaseUri = _a.modelBaseUri;\n            fetchWeightsFromDisk = function (filePaths) {\n              return Promise.all(filePaths.map(function (filePath) {\n                return readFile(filePath).then(function (buf) {\n                  return buf.buffer;\n                });\n              }));\n            };\n            loadWeights = tf.io.weightsLoaderFactory(fetchWeightsFromDisk);\n            _c = (_b = JSON).parse;\n            return [4 /*yield*/, readFile(manifestUri)];\n          case 1:\n            manifest = _c.apply(_b, [_d.sent().toString()]);\n            return [4 /*yield*/, loadWeights(manifest, modelBaseUri)];\n          case 2:\n            weightMap = _d.sent();\n            this.loadFromWeightMap(weightMap);\n            return [2 /*return*/];\n        }\n      });\n    });\n  };\n  NeuralNetwork.prototype.loadFromWeightMap = function (weightMap) {\n    var _a = this.extractParamsFromWeigthMap(weightMap),\n      paramMappings = _a.paramMappings,\n      params = _a.params;\n    this._paramMappings = paramMappings;\n    this._params = params;\n  };\n  NeuralNetwork.prototype.extractWeights = function (weights) {\n    var _a = this.extractParams(weights),\n      paramMappings = _a.paramMappings,\n      params = _a.params;\n    this._paramMappings = paramMappings;\n    this._params = params;\n  };\n  NeuralNetwork.prototype.traversePropertyPath = function (paramPath) {\n    if (!this.params) {\n      throw new Error(\"traversePropertyPath - model has no loaded params\");\n    }\n    var result = paramPath.split('/').reduce(function (res, objProp) {\n      if (!res.nextObj.hasOwnProperty(objProp)) {\n        throw new Error(\"traversePropertyPath - object does not have property \" + objProp + \", for path \" + paramPath);\n      }\n      return {\n        obj: res.nextObj,\n        objProp: objProp,\n        nextObj: res.nextObj[objProp]\n      };\n    }, {\n      nextObj: this.params\n    });\n    var obj = result.obj,\n      objProp = result.objProp;\n    if (!obj || !objProp || !(obj[objProp] instanceof tf.Tensor)) {\n      throw new Error(\"traversePropertyPath - parameter is not a tensor, for path \" + paramPath);\n    }\n    return {\n      obj: obj,\n      objProp: objProp\n    };\n  };\n  return NeuralNetwork;\n}();\nexport { NeuralNetwork };","map":{"version":3,"names":["__awaiter","__generator","tf","getModelUris","loadWeightMap","env","NeuralNetwork","_name","_params","undefined","_paramMappings","Object","defineProperty","prototype","get","enumerable","configurable","params","getParamFromPath","paramPath","_a","traversePropertyPath","obj","objProp","reassignParamFromPath","tensor","dispose","getParamList","_this","map","path","getTrainableParams","filter","param","Variable","getFrozenParams","variable","forEach","freeze","dataSync","throwOnRedispose","isDisposed","Error","serializeParams","Float32Array","Array","from","reduce","flat","arr","concat","load","weightsOrUrl","label","extractWeights","loadFromUri","sent","uri","weightMap","getDefaultModelName","loadFromWeightMap","loadFromDisk","filePath","readFile","manifestUri","modelBaseUri","fetchWeightsFromDisk","loadWeights","manifest","_b","_c","_d","getEnv","filePaths","Promise","all","then","buf","buffer","io","weightsLoaderFactory","JSON","parse","apply","toString","extractParamsFromWeigthMap","paramMappings","weights","extractParams","result","split","res","nextObj","hasOwnProperty","Tensor"],"sources":["/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/node_modules/face-api.js/build/es6/NeuralNetwork.js"],"sourcesContent":["import { __awaiter, __generator } from \"tslib\";\r\nimport * as tf from '@tensorflow/tfjs-core';\r\nimport { getModelUris } from './common/getModelUris';\r\nimport { loadWeightMap } from './dom';\r\nimport { env } from './env';\r\nvar NeuralNetwork = /** @class */ (function () {\r\n    function NeuralNetwork(_name) {\r\n        this._name = _name;\r\n        this._params = undefined;\r\n        this._paramMappings = [];\r\n    }\r\n    Object.defineProperty(NeuralNetwork.prototype, \"params\", {\r\n        get: function () { return this._params; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NeuralNetwork.prototype, \"paramMappings\", {\r\n        get: function () { return this._paramMappings; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(NeuralNetwork.prototype, \"isLoaded\", {\r\n        get: function () { return !!this.params; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    NeuralNetwork.prototype.getParamFromPath = function (paramPath) {\r\n        var _a = this.traversePropertyPath(paramPath), obj = _a.obj, objProp = _a.objProp;\r\n        return obj[objProp];\r\n    };\r\n    NeuralNetwork.prototype.reassignParamFromPath = function (paramPath, tensor) {\r\n        var _a = this.traversePropertyPath(paramPath), obj = _a.obj, objProp = _a.objProp;\r\n        obj[objProp].dispose();\r\n        obj[objProp] = tensor;\r\n    };\r\n    NeuralNetwork.prototype.getParamList = function () {\r\n        var _this = this;\r\n        return this._paramMappings.map(function (_a) {\r\n            var paramPath = _a.paramPath;\r\n            return ({\r\n                path: paramPath,\r\n                tensor: _this.getParamFromPath(paramPath)\r\n            });\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.getTrainableParams = function () {\r\n        return this.getParamList().filter(function (param) { return param.tensor instanceof tf.Variable; });\r\n    };\r\n    NeuralNetwork.prototype.getFrozenParams = function () {\r\n        return this.getParamList().filter(function (param) { return !(param.tensor instanceof tf.Variable); });\r\n    };\r\n    NeuralNetwork.prototype.variable = function () {\r\n        var _this = this;\r\n        this.getFrozenParams().forEach(function (_a) {\r\n            var path = _a.path, tensor = _a.tensor;\r\n            _this.reassignParamFromPath(path, tensor.variable());\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.freeze = function () {\r\n        var _this = this;\r\n        this.getTrainableParams().forEach(function (_a) {\r\n            var path = _a.path, variable = _a.tensor;\r\n            var tensor = tf.tensor(variable.dataSync());\r\n            variable.dispose();\r\n            _this.reassignParamFromPath(path, tensor);\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.dispose = function (throwOnRedispose) {\r\n        if (throwOnRedispose === void 0) { throwOnRedispose = true; }\r\n        this.getParamList().forEach(function (param) {\r\n            if (throwOnRedispose && param.tensor.isDisposed) {\r\n                throw new Error(\"param tensor has already been disposed for path \" + param.path);\r\n            }\r\n            param.tensor.dispose();\r\n        });\r\n        this._params = undefined;\r\n    };\r\n    NeuralNetwork.prototype.serializeParams = function () {\r\n        return new Float32Array(this.getParamList()\r\n            .map(function (_a) {\r\n            var tensor = _a.tensor;\r\n            return Array.from(tensor.dataSync());\r\n        })\r\n            .reduce(function (flat, arr) { return flat.concat(arr); }));\r\n    };\r\n    NeuralNetwork.prototype.load = function (weightsOrUrl) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (weightsOrUrl instanceof Float32Array) {\r\n                            this.extractWeights(weightsOrUrl);\r\n                            return [2 /*return*/];\r\n                        }\r\n                        return [4 /*yield*/, this.loadFromUri(weightsOrUrl)];\r\n                    case 1:\r\n                        _a.sent();\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.loadFromUri = function (uri) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var weightMap;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (uri && typeof uri !== 'string') {\r\n                            throw new Error(this._name + \".loadFromUri - expected model uri\");\r\n                        }\r\n                        return [4 /*yield*/, loadWeightMap(uri, this.getDefaultModelName())];\r\n                    case 1:\r\n                        weightMap = _a.sent();\r\n                        this.loadFromWeightMap(weightMap);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.loadFromDisk = function (filePath) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var readFile, _a, manifestUri, modelBaseUri, fetchWeightsFromDisk, loadWeights, manifest, _b, _c, weightMap;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        if (filePath && typeof filePath !== 'string') {\r\n                            throw new Error(this._name + \".loadFromDisk - expected model file path\");\r\n                        }\r\n                        readFile = env.getEnv().readFile;\r\n                        _a = getModelUris(filePath, this.getDefaultModelName()), manifestUri = _a.manifestUri, modelBaseUri = _a.modelBaseUri;\r\n                        fetchWeightsFromDisk = function (filePaths) { return Promise.all(filePaths.map(function (filePath) { return readFile(filePath).then(function (buf) { return buf.buffer; }); })); };\r\n                        loadWeights = tf.io.weightsLoaderFactory(fetchWeightsFromDisk);\r\n                        _c = (_b = JSON).parse;\r\n                        return [4 /*yield*/, readFile(manifestUri)];\r\n                    case 1:\r\n                        manifest = _c.apply(_b, [(_d.sent()).toString()]);\r\n                        return [4 /*yield*/, loadWeights(manifest, modelBaseUri)];\r\n                    case 2:\r\n                        weightMap = _d.sent();\r\n                        this.loadFromWeightMap(weightMap);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    NeuralNetwork.prototype.loadFromWeightMap = function (weightMap) {\r\n        var _a = this.extractParamsFromWeigthMap(weightMap), paramMappings = _a.paramMappings, params = _a.params;\r\n        this._paramMappings = paramMappings;\r\n        this._params = params;\r\n    };\r\n    NeuralNetwork.prototype.extractWeights = function (weights) {\r\n        var _a = this.extractParams(weights), paramMappings = _a.paramMappings, params = _a.params;\r\n        this._paramMappings = paramMappings;\r\n        this._params = params;\r\n    };\r\n    NeuralNetwork.prototype.traversePropertyPath = function (paramPath) {\r\n        if (!this.params) {\r\n            throw new Error(\"traversePropertyPath - model has no loaded params\");\r\n        }\r\n        var result = paramPath.split('/').reduce(function (res, objProp) {\r\n            if (!res.nextObj.hasOwnProperty(objProp)) {\r\n                throw new Error(\"traversePropertyPath - object does not have property \" + objProp + \", for path \" + paramPath);\r\n            }\r\n            return { obj: res.nextObj, objProp: objProp, nextObj: res.nextObj[objProp] };\r\n        }, { nextObj: this.params });\r\n        var obj = result.obj, objProp = result.objProp;\r\n        if (!obj || !objProp || !(obj[objProp] instanceof tf.Tensor)) {\r\n            throw new Error(\"traversePropertyPath - parameter is not a tensor, for path \" + paramPath);\r\n        }\r\n        return { obj: obj, objProp: objProp };\r\n    };\r\n    return NeuralNetwork;\r\n}());\r\nexport { NeuralNetwork };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}