{"ast":null,"code":"import { __spreadArrays } from \"tslib\";\nimport * as tf from '@tensorflow/tfjs-core';\nimport { conv, convDown, convNoRelu } from './convLayer';\nexport function residual(x, params) {\n  var out = conv(x, params.conv1);\n  out = convNoRelu(out, params.conv2);\n  out = tf.add(out, x);\n  out = tf.relu(out);\n  return out;\n}\nexport function residualDown(x, params) {\n  var out = convDown(x, params.conv1);\n  out = convNoRelu(out, params.conv2);\n  var pooled = tf.avgPool(x, 2, 2, 'valid');\n  var zeros = tf.zeros(pooled.shape);\n  var isPad = pooled.shape[3] !== out.shape[3];\n  var isAdjustShape = pooled.shape[1] !== out.shape[1] || pooled.shape[2] !== out.shape[2];\n  if (isAdjustShape) {\n    var padShapeX = __spreadArrays(out.shape);\n    padShapeX[1] = 1;\n    var zerosW = tf.zeros(padShapeX);\n    out = tf.concat([out, zerosW], 1);\n    var padShapeY = __spreadArrays(out.shape);\n    padShapeY[2] = 1;\n    var zerosH = tf.zeros(padShapeY);\n    out = tf.concat([out, zerosH], 2);\n  }\n  pooled = isPad ? tf.concat([pooled, zeros], 3) : pooled;\n  out = tf.add(pooled, out);\n  out = tf.relu(out);\n  return out;\n}","map":{"version":3,"names":["__spreadArrays","tf","conv","convDown","convNoRelu","residual","x","params","out","conv1","conv2","add","relu","residualDown","pooled","avgPool","zeros","shape","isPad","isAdjustShape","padShapeX","zerosW","concat","padShapeY","zerosH"],"sources":["/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/node_modules/face-api.js/build/es6/faceRecognitionNet/residualLayer.js"],"sourcesContent":["import { __spreadArrays } from \"tslib\";\r\nimport * as tf from '@tensorflow/tfjs-core';\r\nimport { conv, convDown, convNoRelu } from './convLayer';\r\nexport function residual(x, params) {\r\n    var out = conv(x, params.conv1);\r\n    out = convNoRelu(out, params.conv2);\r\n    out = tf.add(out, x);\r\n    out = tf.relu(out);\r\n    return out;\r\n}\r\nexport function residualDown(x, params) {\r\n    var out = convDown(x, params.conv1);\r\n    out = convNoRelu(out, params.conv2);\r\n    var pooled = tf.avgPool(x, 2, 2, 'valid');\r\n    var zeros = tf.zeros(pooled.shape);\r\n    var isPad = pooled.shape[3] !== out.shape[3];\r\n    var isAdjustShape = pooled.shape[1] !== out.shape[1] || pooled.shape[2] !== out.shape[2];\r\n    if (isAdjustShape) {\r\n        var padShapeX = __spreadArrays(out.shape);\r\n        padShapeX[1] = 1;\r\n        var zerosW = tf.zeros(padShapeX);\r\n        out = tf.concat([out, zerosW], 1);\r\n        var padShapeY = __spreadArrays(out.shape);\r\n        padShapeY[2] = 1;\r\n        var zerosH = tf.zeros(padShapeY);\r\n        out = tf.concat([out, zerosH], 2);\r\n    }\r\n    pooled = isPad ? tf.concat([pooled, zeros], 3) : pooled;\r\n    out = tf.add(pooled, out);\r\n    out = tf.relu(out);\r\n    return out;\r\n}\r\n"],"mappings":"AAAA,SAASA,cAAc,QAAQ,OAAO;AACtC,OAAO,KAAKC,EAAE,MAAM,uBAAuB;AAC3C,SAASC,IAAI,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,aAAa;AACxD,OAAO,SAASC,QAAQA,CAACC,CAAC,EAAEC,MAAM,EAAE;EAChC,IAAIC,GAAG,GAAGN,IAAI,CAACI,CAAC,EAAEC,MAAM,CAACE,KAAK,CAAC;EAC/BD,GAAG,GAAGJ,UAAU,CAACI,GAAG,EAAED,MAAM,CAACG,KAAK,CAAC;EACnCF,GAAG,GAAGP,EAAE,CAACU,GAAG,CAACH,GAAG,EAAEF,CAAC,CAAC;EACpBE,GAAG,GAAGP,EAAE,CAACW,IAAI,CAACJ,GAAG,CAAC;EAClB,OAAOA,GAAG;AACd;AACA,OAAO,SAASK,YAAYA,CAACP,CAAC,EAAEC,MAAM,EAAE;EACpC,IAAIC,GAAG,GAAGL,QAAQ,CAACG,CAAC,EAAEC,MAAM,CAACE,KAAK,CAAC;EACnCD,GAAG,GAAGJ,UAAU,CAACI,GAAG,EAAED,MAAM,CAACG,KAAK,CAAC;EACnC,IAAII,MAAM,GAAGb,EAAE,CAACc,OAAO,CAACT,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC;EACzC,IAAIU,KAAK,GAAGf,EAAE,CAACe,KAAK,CAACF,MAAM,CAACG,KAAK,CAAC;EAClC,IAAIC,KAAK,GAAGJ,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,KAAKT,GAAG,CAACS,KAAK,CAAC,CAAC,CAAC;EAC5C,IAAIE,aAAa,GAAGL,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,KAAKT,GAAG,CAACS,KAAK,CAAC,CAAC,CAAC,IAAIH,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,KAAKT,GAAG,CAACS,KAAK,CAAC,CAAC,CAAC;EACxF,IAAIE,aAAa,EAAE;IACf,IAAIC,SAAS,GAAGpB,cAAc,CAACQ,GAAG,CAACS,KAAK,CAAC;IACzCG,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;IAChB,IAAIC,MAAM,GAAGpB,EAAE,CAACe,KAAK,CAACI,SAAS,CAAC;IAChCZ,GAAG,GAAGP,EAAE,CAACqB,MAAM,CAAC,CAACd,GAAG,EAAEa,MAAM,CAAC,EAAE,CAAC,CAAC;IACjC,IAAIE,SAAS,GAAGvB,cAAc,CAACQ,GAAG,CAACS,KAAK,CAAC;IACzCM,SAAS,CAAC,CAAC,CAAC,GAAG,CAAC;IAChB,IAAIC,MAAM,GAAGvB,EAAE,CAACe,KAAK,CAACO,SAAS,CAAC;IAChCf,GAAG,GAAGP,EAAE,CAACqB,MAAM,CAAC,CAACd,GAAG,EAAEgB,MAAM,CAAC,EAAE,CAAC,CAAC;EACrC;EACAV,MAAM,GAAGI,KAAK,GAAGjB,EAAE,CAACqB,MAAM,CAAC,CAACR,MAAM,EAAEE,KAAK,CAAC,EAAE,CAAC,CAAC,GAAGF,MAAM;EACvDN,GAAG,GAAGP,EAAE,CAACU,GAAG,CAACG,MAAM,EAAEN,GAAG,CAAC;EACzBA,GAAG,GAAGP,EAAE,CAACW,IAAI,CAACJ,GAAG,CAAC;EAClB,OAAOA,GAAG;AACd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}