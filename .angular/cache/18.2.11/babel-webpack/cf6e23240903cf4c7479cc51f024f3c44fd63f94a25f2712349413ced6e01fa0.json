{"ast":null,"code":"import { FaceMatch } from '../classes/FaceMatch';\nimport { LabeledFaceDescriptors } from '../classes/LabeledFaceDescriptors';\nimport { euclideanDistance } from '../euclideanDistance';\nvar FaceMatcher = /** @class */function () {\n  function FaceMatcher(inputs, distanceThreshold) {\n    if (distanceThreshold === void 0) {\n      distanceThreshold = 0.6;\n    }\n    this._distanceThreshold = distanceThreshold;\n    var inputArray = Array.isArray(inputs) ? inputs : [inputs];\n    if (!inputArray.length) {\n      throw new Error(\"FaceRecognizer.constructor - expected atleast one input\");\n    }\n    var count = 1;\n    var createUniqueLabel = function () {\n      return \"person \" + count++;\n    };\n    this._labeledDescriptors = inputArray.map(function (desc) {\n      if (desc instanceof LabeledFaceDescriptors) {\n        return desc;\n      }\n      if (desc instanceof Float32Array) {\n        return new LabeledFaceDescriptors(createUniqueLabel(), [desc]);\n      }\n      if (desc.descriptor && desc.descriptor instanceof Float32Array) {\n        return new LabeledFaceDescriptors(createUniqueLabel(), [desc.descriptor]);\n      }\n      throw new Error(\"FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>\");\n    });\n  }\n  Object.defineProperty(FaceMatcher.prototype, \"labeledDescriptors\", {\n    get: function () {\n      return this._labeledDescriptors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(FaceMatcher.prototype, \"distanceThreshold\", {\n    get: function () {\n      return this._distanceThreshold;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  FaceMatcher.prototype.computeMeanDistance = function (queryDescriptor, descriptors) {\n    return descriptors.map(function (d) {\n      return euclideanDistance(d, queryDescriptor);\n    }).reduce(function (d1, d2) {\n      return d1 + d2;\n    }, 0) / (descriptors.length || 1);\n  };\n  FaceMatcher.prototype.matchDescriptor = function (queryDescriptor) {\n    var _this = this;\n    return this.labeledDescriptors.map(function (_a) {\n      var descriptors = _a.descriptors,\n        label = _a.label;\n      return new FaceMatch(label, _this.computeMeanDistance(queryDescriptor, descriptors));\n    }).reduce(function (best, curr) {\n      return best.distance < curr.distance ? best : curr;\n    });\n  };\n  FaceMatcher.prototype.findBestMatch = function (queryDescriptor) {\n    var bestMatch = this.matchDescriptor(queryDescriptor);\n    return bestMatch.distance < this.distanceThreshold ? bestMatch : new FaceMatch('unknown', bestMatch.distance);\n  };\n  FaceMatcher.prototype.toJSON = function () {\n    return {\n      distanceThreshold: this.distanceThreshold,\n      labeledDescriptors: this.labeledDescriptors.map(function (ld) {\n        return ld.toJSON();\n      })\n    };\n  };\n  FaceMatcher.fromJSON = function (json) {\n    var labeledDescriptors = json.labeledDescriptors.map(function (ld) {\n      return LabeledFaceDescriptors.fromJSON(ld);\n    });\n    return new FaceMatcher(labeledDescriptors, json.distanceThreshold);\n  };\n  return FaceMatcher;\n}();\nexport { FaceMatcher };","map":{"version":3,"names":["FaceMatch","LabeledFaceDescriptors","euclideanDistance","FaceMatcher","inputs","distanceThreshold","_distanceThreshold","inputArray","Array","isArray","length","Error","count","createUniqueLabel","_labeledDescriptors","map","desc","Float32Array","descriptor","Object","defineProperty","prototype","get","enumerable","configurable","computeMeanDistance","queryDescriptor","descriptors","d","reduce","d1","d2","matchDescriptor","_this","labeledDescriptors","_a","label","best","curr","distance","findBestMatch","bestMatch","toJSON","ld","fromJSON","json"],"sources":["/Users/alexdalgleishmorel/Desktop/UofC/FALL 24/581/581-project3/node_modules/face-api.js/build/es6/globalApi/FaceMatcher.js"],"sourcesContent":["import { FaceMatch } from '../classes/FaceMatch';\r\nimport { LabeledFaceDescriptors } from '../classes/LabeledFaceDescriptors';\r\nimport { euclideanDistance } from '../euclideanDistance';\r\nvar FaceMatcher = /** @class */ (function () {\r\n    function FaceMatcher(inputs, distanceThreshold) {\r\n        if (distanceThreshold === void 0) { distanceThreshold = 0.6; }\r\n        this._distanceThreshold = distanceThreshold;\r\n        var inputArray = Array.isArray(inputs) ? inputs : [inputs];\r\n        if (!inputArray.length) {\r\n            throw new Error(\"FaceRecognizer.constructor - expected atleast one input\");\r\n        }\r\n        var count = 1;\r\n        var createUniqueLabel = function () { return \"person \" + count++; };\r\n        this._labeledDescriptors = inputArray.map(function (desc) {\r\n            if (desc instanceof LabeledFaceDescriptors) {\r\n                return desc;\r\n            }\r\n            if (desc instanceof Float32Array) {\r\n                return new LabeledFaceDescriptors(createUniqueLabel(), [desc]);\r\n            }\r\n            if (desc.descriptor && desc.descriptor instanceof Float32Array) {\r\n                return new LabeledFaceDescriptors(createUniqueLabel(), [desc.descriptor]);\r\n            }\r\n            throw new Error(\"FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>\");\r\n        });\r\n    }\r\n    Object.defineProperty(FaceMatcher.prototype, \"labeledDescriptors\", {\r\n        get: function () { return this._labeledDescriptors; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FaceMatcher.prototype, \"distanceThreshold\", {\r\n        get: function () { return this._distanceThreshold; },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FaceMatcher.prototype.computeMeanDistance = function (queryDescriptor, descriptors) {\r\n        return descriptors\r\n            .map(function (d) { return euclideanDistance(d, queryDescriptor); })\r\n            .reduce(function (d1, d2) { return d1 + d2; }, 0)\r\n            / (descriptors.length || 1);\r\n    };\r\n    FaceMatcher.prototype.matchDescriptor = function (queryDescriptor) {\r\n        var _this = this;\r\n        return this.labeledDescriptors\r\n            .map(function (_a) {\r\n            var descriptors = _a.descriptors, label = _a.label;\r\n            return new FaceMatch(label, _this.computeMeanDistance(queryDescriptor, descriptors));\r\n        })\r\n            .reduce(function (best, curr) { return best.distance < curr.distance ? best : curr; });\r\n    };\r\n    FaceMatcher.prototype.findBestMatch = function (queryDescriptor) {\r\n        var bestMatch = this.matchDescriptor(queryDescriptor);\r\n        return bestMatch.distance < this.distanceThreshold\r\n            ? bestMatch\r\n            : new FaceMatch('unknown', bestMatch.distance);\r\n    };\r\n    FaceMatcher.prototype.toJSON = function () {\r\n        return {\r\n            distanceThreshold: this.distanceThreshold,\r\n            labeledDescriptors: this.labeledDescriptors.map(function (ld) { return ld.toJSON(); })\r\n        };\r\n    };\r\n    FaceMatcher.fromJSON = function (json) {\r\n        var labeledDescriptors = json.labeledDescriptors\r\n            .map(function (ld) { return LabeledFaceDescriptors.fromJSON(ld); });\r\n        return new FaceMatcher(labeledDescriptors, json.distanceThreshold);\r\n    };\r\n    return FaceMatcher;\r\n}());\r\nexport { FaceMatcher };\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}